<!DOCTYPE html>
<html lang="ja">

<head>
  
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Text Enlargement App</title>
  <meta name="description" content="入力したテキストを大きく表示するアプリです。" />

  <link rel="icon" href="icon-light.png" type="image/png" />

  <link
    href="https://fonts.googleapis.com/css2?family=Potta+One&family=Noto+Serif+JP&family=Sawarabi+Mincho&display=swap"
    rel="stylesheet" />

  <style>

    :root {
      --color-primary: #00793d;
      --color-secondary: #4a6354;
      --color-background: #ffffff;
      --color-on-background: #1a1c19;
      --shape-corner-medium: 12px;
    }


    body {
      margin: 0;
      font-family: 'Noto Serif JP', serif;
      background-color: var(--color-background);
      color: var(--color-on-background);
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      line-height: 1.6;
      word-break: break-word;
    }


    header {
      background-color: var(--color-primary);
      color: #ffffff;
      padding: 1.5rem 1rem;
      font-weight: 700;
      font-size: clamp(1.8rem, 6vw, 2.2rem);
      text-align: center;
      letter-spacing: 0.08em;
    }


    main {
      flex-grow: 1;
      width: 100%;
      max-width: 900px;
      margin: 1.5rem auto;
      padding: 0 1rem;
      display: flex;
      flex-direction: column;
      gap: 3rem;
    }


    section {
      display: flex;
      flex-direction: column;
      gap: 1rem;
    }


    textarea#textInput {
      width: 100%;
      min-height: 140px;
      font-size: 2rem;
      padding: 1rem;
      border-radius: var(--shape-corner-medium);
      border: 2px solid var(--color-primary);
      resize: vertical;
      box-sizing: border-box;
      color: var(--color-on-background);
      background-color: var(--color-background);
      line-height: 1.6;
    }


    #displayArea {
      width: 100%;
      min-height: 220px;
      font-size: 6rem;
      font-weight: 600;
      line-height: 1.6;
      padding: 1rem;
      border-radius: var(--shape-corner-medium);
      background-color: var(--color-background);
      box-shadow: 0 0 16px var(--color-primary);
      border: 2px solid var(--color-primary);
      white-space: pre-wrap;
      word-break: break-word;
      color: #000000;
    }


    #settings {
      display: flex;
      flex-wrap: wrap;
      gap: 2rem;
      justify-content: center;
      align-items: flex-start;
    }


    .setting-item {
      display: flex;
      flex-direction: column;
      align-items: center;
      min-width: 140px;
    }


    .setting-item label {
      font-weight: 600;
      margin-bottom: 0.5rem;
      text-align: center;
    }


    .setting-item input[type=range],
    .setting-item select,
    .setting-item input[type=color] {
      width: 100%;
    }


    footer#footer {
      text-align: center;
      font-size: 0.85rem;
      color: var(--color-secondary);
      padding: 1.5rem 0 2.5rem 0;
    }


    footer#footer a {
      color: var(--color-primary);
      text-decoration: none;
    }


    footer#footer a:hover {
      text-decoration: underline;
    }

  </style>

</head>

<body>

  <header id="appTitle">文字拡大アプリ</header>


  <main>

    <section>
      <h2>入力</h2>
      <textarea id="textInput" placeholder="ここにテキストを入力してください"></textarea>
    </section>


    <section>
      <h2>出力</h2>
      <div id="displayArea">test</div>
    </section>


    <section>
      <h2>設定</h2>
      <div id="settings">

        <div class="setting-item">
          <label for="fontSizeSlider">フォントサイズ (px)</label>
          <input type="range" id="fontSizeSlider" min="40" max="800" step="1" value="120" />
          <output id="fontSizeValue">120</output>
        </div>

        <div class="setting-item">
          <label for="fontWeightSlider">フォント太さ</label>
          <input type="range" id="fontWeightSlider" min="400" max="900" step="100" value="600" />
          <output id="fontWeightValue">600</output>
        </div>

        <div class="setting-item">
          <label for="lineHeightSlider">行間</label>
          <input type="range" id="lineHeightSlider" min="1" max="2" step="0.05" value="1.6" />
          <output id="lineHeightValue">1.6</output>
        </div>

        <div class="setting-item">
          <label for="fontSelector">フォント選択</label>
          <select id="fontSelector">
            <option value="'Potta One', cursive">Potta One</option>
            <option value="'Noto Serif JP', serif" selected>Noto Serif JP</option>
            <option value="'Sawarabi Mincho', serif">Sawarabi Mincho</option>
            <option value="Arial, sans-serif">Arial</option>
            <option value="Verdana, sans-serif">Verdana</option>
            <option value="Courier New, monospace">Courier New</option>
          </select>
        </div>

        <div class="setting-item">
          <label for="accentSelector">アクセントカラー</label>
          <input type="color" id="accentSelector" value="#00793d" />
        </div>

      </div>
    </section>

  </main>


  <footer id="footer">
    <div id="footer-author">&copy;2025 Text Enlargement App</div>
    <div>
      使用ライブラリー:
      <a href="https://developer.mozilla.org/ja/docs/Web/HTML" target="_blank" rel="noopener noreferrer">HTML5</a>,
      <a href="https://developer.mozilla.org/ja/docs/Web/CSS" target="_blank" rel="noopener noreferrer">CSS3</a>,
      <a href="https://developer.mozilla.org/ja/docs/Web/JavaScript" target="_blank" rel="noopener noreferrer">Vanilla
        JavaScript</a>,
      <a href="https://fonts.google.com/" target="_blank" rel="noopener noreferrer">Google Fonts</a>
    </div>
  </footer>


  <script>

    const urlParams = new URLSearchParams(window.location.search);

    const textInput = document.getElementById("textInput");
    const displayArea = document.getElementById("displayArea");
    const header = document.getElementById("appTitle");

    const fontSizeSlider = document.getElementById("fontSizeSlider");
    const fontSizeValue = document.getElementById("fontSizeValue");

    const fontWeightSlider = document.getElementById("fontWeightSlider");
    const fontWeightValue = document.getElementById("fontWeightValue");

    const lineHeightSlider = document.getElementById("lineHeightSlider");
    const lineHeightValue = document.getElementById("lineHeightValue");

    const fontSelector = document.getElementById("fontSelector");
    const accentSelector = document.getElementById("accentSelector");


    // URLパラメータ初期値反映
    const paramText = urlParams.get('text') || urlParams.get('t') || '';
    const paramFontSize = urlParams.get('fontsize');
    const paramFontWeight = urlParams.get('fontweight');
    const paramLineHeight = urlParams.get('lineheight');
    const paramFontFamily = urlParams.get('fontfamily');
    const paramAccent = urlParams.get('accent');

    if (paramText) textInput.value = decodeURIComponent(paramText);
    if (paramFontSize) fontSizeSlider.value = paramFontSize;
    if (paramFontWeight) fontWeightSlider.value = paramFontWeight;
    if (paramLineHeight) lineHeightSlider.value = paramLineHeight;
    if (paramFontFamily) fontSelector.value = paramFontFamily;
    if (paramAccent) accentSelector.value = paramAccent;


    function updateDisplay() {
      displayArea.textContent = textInput.value.trim() || "test";
    }


    function updateStyles() {

      displayArea.style.fontSize = fontSizeSlider.value + "px";
      displayArea.style.fontWeight = fontWeightSlider.value;
      displayArea.style.lineHeight = lineHeightSlider.value;
      displayArea.style.fontFamily = fontSelector.value;

      textInput.style.borderColor = accentSelector.value;
      displayArea.style.borderColor = accentSelector.value;
      displayArea.style.boxShadow = `0 0 16px ${accentSelector.value}`;

      header.style.backgroundColor = accentSelector.value;
      header.style.color = getContrastColor(accentSelector.value);

      fontSizeValue.textContent = fontSizeSlider.value;
      fontWeightValue.textContent = fontWeightSlider.value;
      lineHeightValue.textContent = lineHeightSlider.value;

    }


    function luminance(r, g, b) {
      const a = [r, g, b].map(v => {
        v /= 255;
        return v <= 0.03928 ? v / 12.92 : Math.pow((v + 0.055) / 1.055, 2.4);
      });
      return 0.2126 * a[0] + 0.7152 * a[1] + 0.0722 * a[2];
    }


    function getContrastColor(hex) {
      const r = parseInt(hex.substr(1, 2), 16);
      const g = parseInt(hex.substr(3, 2), 16);
      const b = parseInt(hex.substr(5, 2), 16);
      return luminance(r, g, b) > 0.5 ? "#000000" : "#ffffff";
    }


    textInput.addEventListener("input", updateDisplay);
    fontSizeSlider.addEventListener("input", updateStyles);
    fontWeightSlider.addEventListener("input", updateStyles);
    lineHeightSlider.addEventListener("input", updateStyles);
    fontSelector.addEventListener("input", updateStyles);
    accentSelector.addEventListener("input", updateStyles);

    updateDisplay();
    updateStyles();

  </script>

</body>
</html>