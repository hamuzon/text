<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Text Enlargement App</title>
<style>
:root {
  --color-primary: #00793d;
  --color-background: #fff;
  --color-on-background: #000;
  --shape-corner-medium: 12px;
}

* { box-sizing: border-box; }

body {
  margin: 0;
  font-family: 'Noto Serif JP', serif;
  background-color: var(--color-background);
  color: var(--color-on-background);
  min-height: 100vh;
  display: flex;
  flex-direction: column;
}

header {
  background-color: var(--color-primary);
  color: #fff;
  padding: 1.5rem 1rem;
  text-align: center;
  font-weight: 700;
  font-size: clamp(1.8rem, 6vw, 2.2rem);
}

main {
  flex-grow: 1;
  max-width: 900px;
  margin: 1.5rem auto;
  width: 100%;
  padding: 0 1rem;
  display: flex;
  flex-direction: column;
  gap: 2rem;
}

textarea#textInput {
  width: 100%;
  font-size: 1.5rem;
  min-height: 140px;
  padding: 1rem;
  border-radius: var(--shape-corner-medium);
  border: 2px solid var(--color-primary);
  resize: vertical;
}

#displayArea {
  width: 100%;
  min-height: 25vh;
  max-height: 70vh;
  padding: 1rem;
  border-radius: var(--shape-corner-medium);
  border: 2px solid var(--color-primary);
  box-shadow: 0 0 16px var(--color-primary);
  background-color: var(--color-background);
  color: var(--color-on-background);
  font-weight: 600;
  line-height: 1.4;
  word-break: break-word;
  overflow: hidden;
}

#settings { display: flex; flex-wrap: wrap; gap: 1.5rem; justify-content: center; }

.setting-item { display: flex; flex-direction: column; min-width: 140px; align-items: center; }

.setting-item label { font-weight: 600; margin-bottom: 0.5rem; text-align: center; }

.setting-item input[type=range], .setting-item select, .setting-item input[type=color] { width: 100%; }

button { padding: 0.5rem 1rem; border-radius: var(--shape-corner-medium); border: none; cursor: pointer; font-weight: 600; margin:0.2rem; }
#copyButton { background-color: var(--color-primary); color: #fff; }
#resetButton { background-color: #4a6354; color: #fff; }
</style>
</head>
<body>

<header>文字拡大アプリ</header>

<main>
<section>
<textarea id="textInput" placeholder="ここにテキストを入力してください"></textarea>
</section>

<section>
<div id="displayArea">test</div>
<div>
<button id="copyButton">Copy URL</button>
<button id="resetButton">Reset</button>
</div>
</section>

<section id="settings">
<div class="setting-item">
<label for="fontSizeSlider">フォントサイズ</label>
<input type="range" id="fontSizeSlider" min="40" max="1200" value="120">
<output id="fontSizeValue">120</output>
</div>

<div class="setting-item">
<label for="fontWeightSlider">フォント太さ</label>
<input type="range" id="fontWeightSlider" min="400" max="900" step="100" value="600">
<output id="fontWeightValue">600</output>
</div>

<div class="setting-item">
<label for="lineHeightSlider">行間</label>
<input type="range" id="lineHeightSlider" min="1" max="2" step="0.05" value="1.4">
<output id="lineHeightValue">1.4</output>
</div>

<div class="setting-item">
<label for="fontSelector">フォント</label>
<select id="fontSelector">
<option value="'Noto Serif JP', serif" selected>Noto Serif JP</option>
<option value="'Potta One', cursive">Potta One</option>
<option value="'Sawarabi Mincho', serif">Sawarabi Mincho</option>
<option value="Arial, sans-serif">Arial</option>
</select>
</div>

<div class="setting-item">
<label for="accentSelector">アクセントカラー</label>
<input type="color" id="accentSelector" value="#00793d">
</div>
</section>
</main>

<script>
const textInput=document.getElementById("textInput");
const displayArea=document.getElementById("displayArea");
const fontSizeSlider=document.getElementById("fontSizeSlider");
const fontSizeValue=document.getElementById("fontSizeValue");
const fontWeightSlider=document.getElementById("fontWeightSlider");
const fontWeightValue=document.getElementById("fontWeightValue");
const lineHeightSlider=document.getElementById("lineHeightSlider");
const lineHeightValue=document.getElementById("lineHeightValue");
const fontSelector=document.getElementById("fontSelector");
const accentSelector=document.getElementById("accentSelector");
const copyButton=document.getElementById("copyButton");
const resetButton=document.getElementById("resetButton");

const initialState={ text:"", font:"'Noto Serif JP', serif", weight:"600", size:"120", line:"1.4", color:"#00793d" };

// 改行段差
function updateDisplay(){
  const text=textInput.value.trim()||"test";
  displayArea.innerHTML=text.split("\n").map(line=>`<div style="margin-bottom:0.3em">${line||"&nbsp;"}</div>`).join("");
  fitTextToContainer();
}

// 自動サイズ調整
function fitTextToContainer(){
  const el=displayArea;
  let fontSize=parseInt(fontSizeSlider.value);
  el.style.fontSize=fontSize+"px";

  while((el.scrollHeight>el.clientHeight || el.scrollWidth>el.clientWidth) && fontSize>10){
    fontSize-=2;
    el.style.fontSize=fontSize+"px";
  }
}

// スタイル更新
function updateStyles(){
  displayArea.style.fontWeight=fontWeightSlider.value;
  displayArea.style.lineHeight=lineHeightSlider.value;
  displayArea.style.fontFamily=fontSelector.value;

  const accent=accentSelector.value;
  displayArea.style.borderColor=accent;
  displayArea.style.boxShadow=`0 0 16px ${accent}`;
}

// イベント
textInput.addEventListener("input",updateDisplay);

fontSizeSlider.addEventListener("input",()=>{
  fontSizeValue.textContent=fontSizeSlider.value;
  fitTextToContainer();
});
fontWeightSlider.addEventListener("input",()=>{
  fontWeightValue.textContent=fontWeightSlider.value;
  updateStyles();
  fitTextToContainer();
});
lineHeightSlider.addEventListener("input",()=>{
  lineHeightValue.textContent=lineHeightSlider.value;
  updateStyles();
  fitTextToContainer();
});
fontSelector.addEventListener("input",()=>{updateStyles();fitTextToContainer();});
accentSelector.addEventListener("input",()=>{updateStyles();});

resetButton.addEventListener("click",()=>{
  textInput.value=initialState.text;
  fontSelector.value=initialState.font;
  fontWeightSlider.value=initialState.weight;
  fontSizeSlider.value=initialState.size;
  lineHeightSlider.value=initialState.line;
  accentSelector.value=initialState.color;
  fontSizeValue.textContent=fontSizeSlider.value;
  fontWeightValue.textContent=fontWeightSlider.value;
  lineHeightValue.textContent=lineHeightSlider.value;
  updateStyles();
  updateDisplay();
});

updateStyles();
updateDisplay();
</script>
</body>
</html>